<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSwap Profile (Static Demo)</title>
     <link rel="stylesheet" href="css/unified.css">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { font-family: Arial; margin: 0; background: #f5f5f7; }
        .profile-container { max-width: 900px; margin: auto; padding: 20px; }

        /* Basic header styling */
        .profile-header { display: flex; gap: 20px; padding: 20px; background: white; border-radius: 12px; }
        .profile-photo { width: 120px; height: 120px; border-radius: 50%; border: 3px solid #ddd; }

        .profile-info h1 { margin: 5px 0; }
        .profile-actions button { margin-right: 10px; }

        button { padding: 8px 14px; border-radius: 6px; cursor: pointer; border: none; }
        .btn-primary { background: #007bff; color: white; }
        .btn-secondary { background: #555; color: white; }
        .btn-outline { background: white; border: 1px solid #aaa; }

        /* Skills */
        .skills-section { margin-top: 20px; background: white; padding: 20px; border-radius: 12px; }
        .skills-column { width: 100%; }
        .skills-list { display: flex; gap: 10px; flex-wrap: wrap; }
        .skill-tag { background: #eaeaea; padding: 8px 12px; border-radius: 20px; }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                 background: rgba(0,0,0,0.5); align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 20px; border-radius: 12px; width: 350px; }
        .form-group { margin-bottom: 15px; }
        input, textarea, select { width: 100%; padding: 8px; }

    </style>
</head>
<body>
     <script src="js/common-navbar.js"></script>


<main class="profile-container">

    <!-- Header -->
    <section class="profile-header">
        <div class="profile-section">
<img id="profileImage" src="default.jpg" width="120" height="120" style="border-radius: 50%; cursor:pointer;">

<input type="file" id="imageInput" accept="image/*" style="display:none;" />
</div>

        <div class="profile-info">
            <h1 id="profileName">jawadun Noor</h1>
            <p class="username">@<span id="profileUsername">jawadun</span></p>

            <div class="profile-actions">
                <button class="btn-primary" onclick="openEditModal()">Edit Profile</button>
                <button class="btn-secondary">Message</button>
            </div>
        </div>
    </section>

    <!-- About -->
    <section class="skills-section">
        <h2><i class="fas fa-user"></i> About</h2>
        <p id="bioText">Hey! I love teaching and learning new skills.</p>
    </section>

    <!-- Skills -->
    <section class="skills-section">
        <h2>Skills I Have <button onclick="openSkillModal('have')">+</button></h2>
        <div id="skillsHave" class="skills-list">
            <span class="skill-tag">JavaScript</span>
            <span class="skill-tag">Golang</span>
        </div>

        <h2 style="margin-top:25px;">Skills I Want <button onclick="openSkillModal('want')">+</button></h2>
        <div id="skillsWant" class="skills-list">
            <span class="skill-tag">UI/UX</span>
        </div>
    </section>

</main>

<!-- Edit Profile Modal -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <h2>Edit Profile</h2>

        <div class="form-group">
            <label>Name</label>
            <input id="editName">
        </div>

        <div class="form-group">
            <label>Bio</label>
            <textarea id="editBio"></textarea>
        </div>

        <button class="btn-secondary" onclick="closeEditModal()">Cancel</button>
        <button class="btn-primary" onclick="saveProfile()">Save</button>
    </div>
</div>

<!-- Skill Modal -->
<div id="skillModal" class="modal">
    <div class="modal-content">
        <h2 id="skillModalTitle">Add Skill</h2>

        <div class="form-group">
            <label>Skill</label>
            <input id="skillName">
        </div>

        <button class="btn-secondary" onclick="closeSkillModal()">Cancel</button>
        <button class="btn-primary" onclick="saveSkill()">Add</button>
    </div>
</div>

<script>

// ------------------ Load EVERYTHING on Page Load ------------------
window.onload = () => {
    const saved = JSON.parse(localStorage.getItem("profileData")) || {};

    // Load Photo
    const savedImage = localStorage.getItem("profileImage");
    if (savedImage) {
        document.getElementById("profileImage").src = savedImage;
    }

    // Load Profile Name + Bio
    if (saved.name) document.getElementById("profileName").innerText = saved.name;
    if (saved.bio) document.getElementById("bioText").innerText = saved.bio;

    // Load Skills
    saved.skillsHave?.forEach(skill => addSkillTag("have", skill));
    saved.skillsWant?.forEach(skill => addSkillTag("want", skill));
};


// ------------------ Save Everything including Photo ------------------
function saveToLocalStorage() {
    const data = {
        name: document.getElementById("profileName").innerText,
        bio: document.getElementById("bioText").innerText,
        skillsHave: Array.from(document.getElementById("skillsHave").children).map(e => e.innerText),
        skillsWant: Array.from(document.getElementById("skillsWant").children).map(e => e.innerText),
    };

    localStorage.setItem("profileData", JSON.stringify(data));
}


// ------------------ PHOTO UPLOAD ------------------
document.getElementById("imageInput").addEventListener("change", function () {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();

    reader.onload = function (e) {
        const imageData = e.target.result;

        // Set new image
        document.getElementById("profileImage").src = imageData;

        // Save Image Separately
        localStorage.setItem("profileImage", imageData);
    };

    reader.readAsDataURL(file);
});


// ------------------ Edit Modal ------------------
function openEditModal() {
    document.getElementById("editName").value = document.getElementById("profileName").innerText;
    document.getElementById("editBio").value = document.getElementById("bioText").innerText;
    document.getElementById("editModal").style.display = "flex";
}
function closeEditModal() {
    document.getElementById("editModal").style.display = "none";
}
function saveProfile() {
    document.getElementById("profileName").innerText = document.getElementById("editName").value;
    document.getElementById("bioText").innerText = document.getElementById("editBio").value;
    saveToLocalStorage();
    closeEditModal();
}


// ------------------ Skills ------------------
let currentSkillType = "have";

function openSkillModal(type) {
    currentSkillType = type;
    document.getElementById("skillName").value = "";
    document.getElementById("skillModalTitle").innerText =
        type === "have" ? "Add Skill (Have)" : "Add Skill (Want)";
    document.getElementById("skillModal").style.display = "flex";
}
function closeSkillModal() {
    document.getElementById("skillModal").style.display = "none";
}
function saveSkill() {
    const skill = document.getElementById("skillName").value.trim();
    if (!skill) return;
    addSkillTag(currentSkillType, skill);
    saveToLocalStorage();
    closeSkillModal();
}
function addSkillTag(type, skill) {
    const target = type === "have" ? document.getElementById("skillsHave") : document.getElementById("skillsWant");

    const tag = document.createElement("span");
    tag.className = "skill-tag";
    tag.innerText = skill;

    // Remove skill on click
    tag.onclick = () => {
        tag.remove();
        saveToLocalStorage();
    };

    target.appendChild(tag);
}

</script>

</body>
</html>
